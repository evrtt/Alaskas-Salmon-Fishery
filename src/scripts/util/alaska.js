import AK from '../../../alaska_500k.js';

const width = window.innerWidth;
const height = window.innerHeight;
const alaskaGeoJson = {
  "type": "FeatureCollection",
  "features": [AK]
}

export const projection = d3.geoMercator()
  .fitExtent(
    [
      [10, 10],
      [width - 10, height - 10],
    ],
    alaskaGeoJson
  )

export const areas = [
    {
      title: "Kotzebue", 
      rect: [
        [-160.91609582550768, 66.02147958101679],
        [-164.173980182047, 66.02147958101679],
        [-164.173980182047, 67.15792670591507],
        [-160.91609582550768, 67.15792670591507],
        [-160.91609582550768, 66.02147958101679]
      ], 
      line: [
        [-162.75075500093894, 66.61030936350049], 
        [-165.45638539991677, 67.35511868130742]
      ]
    },
    {
      title: "Kuskokwim", 
      rect: [
        [-161.58038969052865, 59.06568291400549],
        [-164.385943, 59.06568291400549],
        [-164.385943, 60.449060],
        [-161.58038969052865, 60.449060],
        [-161.58038969052865, 59.06568291400549]
      ], 
      line: [
        [-162.61288934041147, 59.619327200001266], 
        [-166.30680136604542, 58.406451176287135]
      ]
      },
    {
      title: "Norton Sound", 
      rect: [
        [-160.6956461387262, 63.32838529717731],
        [-166.516336, 63.32838529717731],
        [-166.516336, 64.972821],
        [-160.6956461387262, 64.972821],
        [-160.6956461387262, 63.32838529717731]
      ], 
      line: [
        [-162.46535519863104, 64.05190962382768], 
        [-168.14628799425125, 64.24863325775765]
      ]
    },
    {
      title: "Yukon River", 
      rect: [
        [-163.079208, 62.52892775998075],
        [-165.0640988907766, 62.52892775998075],
        [-165.0640988907766, 63.258378298296215],
        [-163.079208, 63.258378298296215],
        [-163.079208, 62.52892775998075]
      ], 
      line: [
        [-165.50660311305106, 62.643382583042005], 
        [-169.15500534976613, 62.288268861541745]
      ]
    },
    {
      title: "Bristol Bay", 
      rect: [
        [-156.941329, 56.965199170004965],
        [-162.05625724615115, 56.965199170004965],
        [-162.05625724615115, 59.036099],
        [-156.941329, 59.036099],
        [-156.941329, 56.965199170004965]
      ], 
      line: [
        [-159.07000261214498, 58.06911606091179], 
        [-152.00712708274554, 66.55522673411546]
      ]
    },
    {
      title: "Cook Inlet", 
      rect: [
        [-154.26499773972284, 59.07109314036479],
        [-149.43830837972038, 59.07109314036479],
        [-149.43830837972038, 61.383330375381526],
        [-154.26499773972284, 61.383330375381526],
        [-154.26499773972284, 59.07109314036479]
      ], 
      line: [
        [-152.65365969078832, 59.42486625786394], 
        [-139.55282541742721, 67.35788579875347]
      ]
    },
    {
      title: "Prince William Sound", 
      rect: [
        [-143.94379487175303, 59.45746863067117],
        [-148.71427099899506, 59.45746863067117],
        [-148.71427099899506, 61.25121467077413],
        [-143.94379487175303, 61.25121467077413],
        [-143.94379487175303, 59.45746863067117]
      ], 
      line: [
        [-147.09391061807054, 60.70650201429044], 
        [-140.2718841215425, 63.85052875477269]
      ]
    },
    {
      title: "Southeast Alaska", 
      rect: [
        [-129.332031, 54.484837],
        [-140.13620545027447, 54.484837],
        [-140.13620545027447, 60.18008915005359],
        [-129.332031, 60.18008915005359],
        [-129.332031, 54.484837]
      ], 
      line: [
        [-134.05013097603768, 57.186978408650454], 
        [-144.44792070227217, 55.91376231220995]
      ]
    },
    {
      title: "Alaksan Peninsula/Aleutian Islands", 
      rect: [
        [-161.0992717187983, 51.235],
        [-179.1256032424475, 51.235],
        [-179.1256032424475, 56.06928416194262],
        [-161.0992717187983, 56.06928416194262],
        [-161.0992717187983, 51.235]
      ], 
      line: [
        [-165.232772334737, 54.23480436673355], 
        [-172.94678815396927, 58.27739560637519]
      ]
    },
    {
      title: "Chignik", 
      rect: [
        [-155.45638553082975, 54.691240],
        [-160.95876579890668, 54.691240],
        [-160.95876579890668, 56.800398],
        [-155.45638553082975, 56.800398],
        [-155.45638553082975, 54.691240]
      ], 
      line: [
        [-157.96017040218436, 55.86845119828741], 
        [-158.10339730174698, 53.6546519728167]
      ]
    },
    {
      title: "Kodiak", 
      rect: [
        [-151.757786, 56.429975],
        [-154.877566, 56.429975],
        [-154.877566, 58.615083],
        [-151.757786, 58.615083],
        [-151.757786, 56.429975]
      ], 
      line: [
        [-153.33984384526508, 57.450847982884504], 
        [-153.2136639009687, 54.05681980564907]
      ]
    },
  ]

// const areaLongLats = [
//   [[-162.75075500093894, 66.61030936350049], [-165.45638539991677, 67.35511868130742]],
//   [[-162.61288934041147, 59.619327200001266], [-166.30680136604542, 58.406451176287135]],
//   [[-162.46535519863104, 64.05190962382768], [-168.14628799425125, 64.24863325775765]],
//   [[-165.50660311305106, 62.643382583042005], [-169.15500534976613, 62.288268861541745]],
//   [[-159.07000261214498, 58.06911606091179], [-152.00712708274554, 66.55522673411546]],
//   [[-152.65365969078832, 59.42486625786394], [-139.55282541742721, 67.35788579875347]],
//   [[-147.09391061807054, 60.70650201429044], [-140.2718841215425, 63.85052875477269]],
//   [[-134.05013097603768, 57.186978408650454], [-144.44792070227217, 55.91376231220995]],
//   [[-165.232772334737, 54.23480436673355], [-172.94678815396927, 58.27739560637519]],
//   [[-157.96017040218436, 55.86845119828741], [-158.10339730174698, 53.6546519728167]],
//   [[-153.33984384526508, 57.450847982884504], [-153.2136639009687, 54.05681980564907]]
// ]

const salmonAreas = areas.map(
  (el, idx) => ({
    title: el.title,
    rect: el.rect.map(pair => projection(pair)),
    line: el.line.map(pair => projection(pair))
  })
)

export const renderAK = () => {

  const svg = d3.select(".data")
    .append("svg")
    .attr("id", "alaska")
    .attr("width", width - 10)
    .attr("height", height - 10);

  const path = d3.geoPath()
    .projection(projection)
  
    svg.append("g")
    .attr("class", "alaska-svg")
    .selectAll("path")
    .data(alaskaGeoJson.features)
    .join("path")
    .attr("d", (feature) => path(feature))
    .attr("fill", "white")

  const rectGenerator = d3.area()
  const lineGenerator = d3.line()

  salmonAreas.forEach(area => {
    
    const rect = rectGenerator(area.rect)
    const line = lineGenerator(area.line)
    const lines = lineGenerator(area.rect)

    d3.select(".alaska-svg")
      .append("path")
      .attr('d', lines)
      .attr("stroke", "grey")
      .attr("fill", "grey")
      .attr("fill-opacity", "0.1")

    d3.select(".alaska-svg")
      .append("h6")
      .attr("position", "fixed")
      .attr("bottom", area.line[0][0])
      .attr("left", area.line[0][1])
      .text(area.title)

  })
}

export const clearAK = () => {
  d3.select("#alaska")
    .remove()
}
